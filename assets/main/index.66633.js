System.register("chunks:///_virtual/ClickFishCtr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MyFish.ts"],(function(t){"use strict";var i,e,n,o,r,c,s,a,h,l,u,y,C,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,c=t._decorator,s=t.Camera,a=t.CCFloat,h=t.geometry,l=t.input,u=t.Input,y=t.PhysicsSystem,C=t.Component},function(t){p=t.MyFish}],execute:function(){var f,d,_,k,v,m,T;r._RF.push({},"742afIBq/ZNo7glNtjbTUz3","ClickFishCtr",void 0);var b=c.ccclass,g=c.property;t("ClickFishCtr",(f=b("ClickFishCtr"),d=g({type:s,visible:!0,displayName:"相机"}),_=g({type:a,visible:!0,displayName:"点击冷却时间"}),f((m=i((v=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),c=0;c<e;c++)r[c]=arguments[c];return(i=t.call.apply(t,[this].concat(r))||this)._canCheck=void 0,n(i,"_cam",m,o(i)),i._ray=void 0,i._isInCd=void 0,n(i,"_cdDuration",T,o(i)),i}e(i,t);var r=i.prototype;return r.start=function(){this.init()},r.onDestroy=function(){this.myDestroy()},r.update=function(t){},r.init=function(){this._ray=new h.Ray,l.on(u.EventType.TOUCH_START,this.onTouchStart,this),this.enableClickCheck(),this.exitCd()},r.myDestroy=function(){l.off(u.EventType.TOUCH_START,this.onTouchStart,this)},r.enableClickCheck=function(){this._canCheck=!0},r.disableClickCheck=function(){this._canCheck=!1},r.onTouchStart=function(t){if(this._canCheck&&!this._isInCd&&(this._cam.screenPointToRay(t.getLocation().x,t.getLocation().y,this._ray),y.instance.raycast(this._ray)))for(var i=y.instance.raycastResults,e=0;e<i.length;e++){var n=i[e].collider.node.getComponent(p);if(n){n.click(),this.enterCd();break}}},r.enterCd=function(){var t=this;this._isInCd=!0,setTimeout((function(){t.exitCd()}),1e3*this._cdDuration)},r.exitCd=function(){this._isInCd=!1},i}(C)).prototype,"_cam",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=i(v.prototype,"_cdDuration",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.8}}),k=v))||k));r._RF.pop()}}}));

System.register("chunks:///_virtual/Fish.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,i,r,a,o,u,s,c,l,h,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.createClass,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,u=e._decorator,s=e.animation,c=e.SkinnedMeshRenderer,l=e.Material,h=e.CCFloat,p=e.Component}],execute:function(){var f,d,_,y,b,v,m,g,x,I,w,T,k;o._RF.push({},"40006aUPbVJsbybdoemAh+E","Fish",void 0);var z=u.ccclass,A=u.property;e("Fish",(f=z("Fish"),d=A({type:s.AnimationController,visible:!0}),_=A({type:c,visible:!0}),y=A({type:[l],visible:!0}),b=A({type:h,visible:!0}),v=A({type:s.AnimationController,visible:!0}),f((x=t((g=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,r(t,"_ac",x,a(t)),r(t,"_skinRenderer",I,a(t)),r(t,"_mats",w,a(t)),t._curIndex=0,r(t,"_interval",T,a(t)),t._canTurnOver=void 0,r(t,"_shadowAc",k,a(t)),t}n(t,e);var o=t.prototype;return o.onLoad=function(){this.init()},o.start=function(){},o.update=function(e){},o.onDestroy=function(){this.myDestroy()},o.turnOver=function(){this.curIndex++,this._ac.setValue("TurnOver",this.curIndex),this._shadowAc.setValue("TurnOver",this.curIndex),this.changeMat(300)},o.init=function(){this._curIndex=0,this.changeMat(),this._canTurnOver=!0,this._canTurnOver=!1},o.myDestroy=function(){},o.onTouchStart=function(e){},o.changeMat=function(e){var t=this;setTimeout((function(){return t._skinRenderer.setMaterial(t._mats[t._curIndex],0)}),300)},i(t,[{key:"maxIndex",get:function(){return this._mats.length-1}},{key:"curIndex",get:function(){return this._curIndex},set:function(e){(e<0||e>this.maxIndex)&&(e=0),this._curIndex=e}}]),t}(p)).prototype,"_ac",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(g.prototype,"_skinRenderer",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(g.prototype,"_mats",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=t(g.prototype,"_interval",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),k=t(g.prototype,"_shadowAc",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=g))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/FishGroup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Level.ts","./MyFish.ts"],(function(i){"use strict";var e,t,s,r,n,o,h,a,u,l,c,f,d;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,s=i.createForOfIteratorHelperLoose,r=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){o=i.cclegacy,h=i._decorator,a=i.Prefab,u=i.Vec2,l=i.instantiate,c=i.Component},function(i){f=i.Level},function(i){d=i.MyFish}],execute:function(){var y,v,p,F,m;o._RF.push({},"0e635cFw5JOq55YwCuPCtqk","FishGroup",void 0);var _=h.ccclass,b=h.property,w=(i("FishGroup",(y=_("FishGroup"),v=b({type:a,visible:!0}),y((m=e((F=function(i){function e(){for(var e,t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return(e=i.call.apply(i,[this].concat(s))||this)._fishes=void 0,r(e,"_myFishPrefab",m,n(e)),e}t(e,i);var o=e.prototype;return o.init=function(){this._fishes=new Array},o.myDestroy=function(){this.destroyAllFishes()},o.createFishes=function(i){this.destroyAllFishes(),this._fishes=new Array;for(var e=0;e<i.x;e++)for(var t=0;t<i.y;t++){var s=new u(e,t),r=(this.idToKey(s),l(this._myFishPrefab).getComponent(d));r.init(s,this),this.node.addChild(r.node),this._fishes.push(new w(s,r))}},o.destroyAllFishes=function(){this._fishes.splice(0,this._fishes.length),this._fishes=null,this.node.removeAllChildren()},o.idToKey=function(i){return 100*i.x+i.y},o.keyToId=function(i){return new u(Number((i/100).toFixed(0)),i%100)},o.turnover=function(i,e){var t=this;if(void 0===e&&(e=.001),this.isValidId(i)){var r=this.idToFish(i);r&&(r.turnOver(),setTimeout((function(){for(var e,r=t.getNeighborIds(i),n=s(r);!(e=n()).done;){var o=e.value,h=t.idToFish(o);h&&h.turnOver()}}),1e3*e))}},o.isValidId=function(i){return i.x>=0&&i.y>=0&&i.x<f.instance.mapSize.x&&i.y<f.instance.mapSize.y},o.getNeighborIds=function(i){for(var e=[new u(i.x-1,i.y),new u(i.x+1,i.y),new u(i.x,i.y-1),new u(i.x,i.y+1)],t=e.length-1;t>=0;t--){var s=e[t];this.isValidId(s)||e.splice(t,1)}return e},o.idToFish=function(i){for(var e,t=null,r=s(this._fishes);!(e=r()).done;){var n=e.value;if(n.id.equals(i)){t=n.myFish;break}}return t},e}(c)).prototype,"_myFishPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=F))||p)),function(i,e){this.id=void 0,this.myFish=void 0,this.id=i,this.myFish=e});o._RF.pop()}}}));

System.register("chunks:///_virtual/Level.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FishGroup.ts"],(function(e){"use strict";var t,i,n,r,s,a,o,p,u,c,l,h,m,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.createClass,r=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,p=e.CCInteger,u=e.CCFloat,c=e.Vec2,l=e.randomRangeInt,h=e.Vec3,m=e.Component},function(e){f=e.FishGroup}],execute:function(){var _,y,z,v,S,g,b,d,E,G;a._RF.push({},"081f4vBtXVEgpn8VG2jEJsI","Level",void 0);var w=o.ccclass,L=o.property;e("Level",(_=w("Level"),y=L({type:p,visible:!0,displayName:"地图 宽"}),z=L({type:p,visible:!0,displayName:"地图 高"}),v=L({type:u,visible:!0,displayName:"地图单元格边长"}),_(((G=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,r(t,"_mapSizeX",b,s(t)),r(t,"_mapSizeY",d,s(t)),r(t,"_mapElementSize",E,s(t)),t._fishGroup=void 0,t}i(t,e);var a=t.prototype;return a.start=function(){this.init()},a.onDestroy=function(){this.myDestroy()},a.createLv=function(){this._fishGroup.createFishes(new c(this._mapSizeX,this._mapSizeY));for(var e=l(this._mapSizeX+this._mapSizeY,this._mapSizeX*this._mapSizeY),t=0;t<e;t++){var i=new c(l(0,this._mapSizeX),l(0,this._mapSizeY));this._fishGroup.turnover(i)}},a.init=function(){t._instance=this,this._fishGroup=this.getComponent(f),this._fishGroup.init(),this.createLv()},a.myDestroy=function(){this._fishGroup.myDestroy()},a.getElementPosById=function(e){return this.getElementPos(e.x,e.y)},a.getElementPos=function(e,t){return new h(e*this._mapElementSize,t*this._mapElementSize,0)},n(t,[{key:"mapSize",get:function(){return new c(this._mapSizeX,this._mapSizeY)}}],[{key:"instance",get:function(){return t._instance}}]),t}(m))._instance=void 0,b=t((g=G).prototype,"_mapSizeX",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),d=t(g.prototype,"_mapSizeY",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),E=t(g.prototype,"_mapElementSize",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),S=g))||S));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./ClickFishCtr.ts","./Fish.ts","./FishGroup.ts","./Level.ts","./MyFish.ts"],(function(){"use strict";return{setters:[null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MyFish.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Fish.ts","./Level.ts"],(function(i){"use strict";var e,t,r,n,s,o,u,l,c,a,h;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,r=i.createClass,n=i.initializerDefineProperty,s=i.assertThisInitialized},function(i){o=i.cclegacy,u=i._decorator,l=i.CCFloat,c=i.Component},function(i){a=i.Fish},function(i){h=i.Level}],execute:function(){var y,p,f,v,_,d,m;o._RF.push({},"00c26tkJxxJWa830jKiSBWP","MyFish",void 0);var b=u.ccclass,g=u.property;i("MyFish",(y=b("MyFish"),p=g({type:l,visible:!0,displayName:"自己翻身后，邻居等多久才翻身"}),f=g({type:a,visible:!0}),y((d=e((_=function(i){function e(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=i.call.apply(i,[this].concat(r))||this)._myId=void 0,n(e,"_neighborDelayTurnOverTime",d,s(e)),n(e,"_fish",m,s(e)),e._fishGroup=void 0,e}t(e,i);var o=e.prototype;return o.init=function(i,e){this._myId=i,this._fishGroup=e,this.node.setPosition(h.instance.getElementPosById(this._myId))},o.myDestroy=function(){this._fishGroup=null},o.turnOver=function(){this._fish.turnOver()},o.click=function(){this._fishGroup.turnover(this._myId,this._neighborDelayTurnOverTime)},r(e,[{key:"id",get:function(){return this._myId}}]),e}(c)).prototype,"_neighborDelayTurnOverTime",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),m=e(_.prototype,"_fish",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=_))||v));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});