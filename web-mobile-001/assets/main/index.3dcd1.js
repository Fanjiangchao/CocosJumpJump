System.register("chunks:///_virtual/GameMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MyTouchDownCtr.ts","./PlayerCtr.ts"],(function(t){"use strict";var e,r,i,n,a,o,s,h,u,l,c,d,p,f,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.createClass,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,h=t.Prefab,u=t.Node,l=t.Label,c=t.instantiate,d=t.Vec3,p=t.Component},function(t){f=t.MyTouchDownCtr},function(t){y=t.PlayerCtr}],execute:function(){var _,T,b,g,N,m,S,C,L,v,G,w,B,E;o._RF.push({},"1dda01dggtE7q4rg3YkGo1K","GameMgr",void 0);var I,M,R=s.ccclass,P=s.property;!function(t){t[t.BT_NONE=0]="BT_NONE",t[t.BT_STONE=1]="BT_STONE"}(I||(I={})),function(t){t[t.GS_INIT=0]="GS_INIT",t[t.GS_PLAYING=1]="GS_PLAYING",t[t.GS_END=2]="GS_END"}(M||(M={}));t("GameMgr",(_=R("GameMgr"),T=P({type:h}),b=P({type:y}),g=P({type:u}),N=P({type:l}),m=P({type:f}),_((L=e((C=function(t){function e(){for(var e,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,n(e,"cubePrfb",L,a(e)),n(e,"roadLength",v,a(e)),e._road=[],n(e,"playerCtr",G,a(e)),n(e,"startMenu",w,a(e)),n(e,"stepsLabel",B,a(e)),n(e,"myTouchDownCtr",E,a(e)),e.initRoadLength=20,e.addRoadThreshold=10,e.addRoadLength=10,e}r(e,t);var o=e.prototype;return o.start=function(){var t;this.curState=M.GS_INIT,null==(t=this.playerCtr)||t.node.on("JumpEnd",this.onPlayerJumpEnd,this)},o.update=function(t){},o.generateRoad=function(){this.node.removeAllChildren(),this._road=[],this._road.push(I.BT_STONE);for(var t=1;t<this.roadLength;t++)this._road[t-1]===I.BT_NONE?this._road.push(I.BT_STONE):this._road.push(Math.min(1,Math.floor(2*Math.random())));for(var e=0;e<this._road.length;e++){var r=this.spawnBlockByType(this._road[e]);r&&(this.node.addChild(r),r.setPosition(e,-1.5,0))}},o.initRoad=function(){this.node.removeAllChildren(),this._road=[],this.addRoad(this.initRoadLength)},o.tryAddRoad=function(t){this._road.length-t<this.addRoadThreshold&&this.addRoad(this._road.length+this.addRoadLength)},o.addRoad=function(t){for(var e=this._road.length,r=e;r<t;r++)0===r||this._road[r-1]===I.BT_NONE?this._road.push(I.BT_STONE):this._road.push(Math.min(1,Math.floor(2*Math.random())));for(var i=e;i<this._road.length;i++){var n=this.spawnBlockByType(this._road[i]);n&&(this.node.addChild(n),n.setPosition(i,-1.5,0))}},o.spawnBlockByType=function(t){if(!this.cubePrfb)return null;var e=null;switch(t){case I.BT_STONE:e=c(this.cubePrfb)}return e},o.init=function(){this.startMenu&&(this.startMenu.active=!0),this.initRoad(),this.playerCtr&&this.playerCtr.node.setPosition(d.ZERO),this.myTouchDownCtr&&this.myTouchDownCtr.setInputActive(!1),this.playerCtr.reset()},o.onStartBtnClicked=function(){this.curState=M.GS_PLAYING},o.checkResult=function(t){t<this.roadLength?this._road[t]==I.BT_NONE&&(this.curState=M.GS_INIT):this.curState=M.GS_INIT},o.onPlayerJumpEnd=function(t){this.stepsLabel&&(this.stepsLabel.string=""+(t>=this.roadLength?this.roadLength:t)),this.checkResult(t),this.tryAddRoad(t)},i(e,[{key:"curState",set:function(t){var e=this;switch(t){case M.GS_INIT:this.init();break;case M.GS_PLAYING:this.startMenu&&(this.startMenu.active=!1),this.stepsLabel&&(this.stepsLabel.string="0"),setTimeout((function(){e.myTouchDownCtr&&e.myTouchDownCtr.setInputActive(!0)}),.1);break;case M.GS_END:}}}]),e}(p)).prototype,"cubePrfb",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(C.prototype,"roadLength",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),G=e(C.prototype,"playerCtr",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(C.prototype,"startMenu",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(C.prototype,"stepsLabel",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(C.prototype,"myTouchDownCtr",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=C))||S));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./GameMgr.ts","./MyTouchDownCtr.ts","./PlayerCtr.ts"],(function(){"use strict";return{setters:[null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MyTouchDownCtr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlayerCtr.ts"],(function(t){"use strict";var n,r,e,i,o,u,a,c,s,p,l;return{setters:[function(t){n=t.applyDecoratedDescriptor,r=t.inheritsLoose,e=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,u=t._decorator,a=t.UITransform,c=t.input,s=t.Input,p=t.Component},function(t){l=t.PlayerCtr}],execute:function(){var h,T,f,y,C,d,m;o._RF.push({},"a5145NAZPhDHLxwEZFdzfYj","MyTouchDownCtr",void 0);var S=u.ccclass,v=u.property;t("MyTouchDownCtr",(h=S("MyTouchDownCtr"),T=v({type:a}),f=v({type:l}),h((d=n((C=function(t){function n(){for(var n,r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=t.call.apply(t,[this].concat(o))||this,e(n,"uiTransform",d,i(n)),n._middleX=0,e(n,"playerCtr",m,i(n)),n}r(n,t);var o=n.prototype;return o.start=function(){this.init()},o.update=function(t){},o.init=function(){this._middleX=this.uiTransform.contentSize.x/2},o.onLoad=function(){c.on(s.EventType.TOUCH_START,this.onTouchStart,this)},o.onDestroy=function(){c.off(s.EventType.TOUCH_START,this.onTouchStart,this)},o.onTouchStart=function(t){t.getLocation().x<=this._middleX?this.playerCtr.jumpByStep(2):this.playerCtr.jumpByStep(1)},o.setInputActive=function(t){t?c.on(s.EventType.TOUCH_START,this.onTouchStart,this):c.off(s.EventType.TOUCH_START,this.onTouchStart,this)},n}(p)).prototype,"uiTransform",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=n(C.prototype,"playerCtr",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=C))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerCtr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,s,n,o,r,u,p,c,h,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,s=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,u=t.Animation,p=t.input,c=t.Input,h=t.Vec3,a=t.Component}],execute:function(){var _,m,d,l,P;o._RF.push({},"75ee8Pv0JxJprQm7MkW8oW/","PlayerCtr",void 0);var y=r.ccclass,f=r.property;t("PlayerCtr",(_=y("PlayerCtr"),m=f({type:u}),_((P=e((l=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this)._startJump=!1,e._jumpStep=0,e._curJumpTime=0,e._jumpTime=.3,e._curJumpSpeed=0,e._curPos=new h,e._deltaPos=new h(0,0,0),e._targetPos=new h,e._curMoveIndex=0,s(e,"BodyAnim",P,n(e)),e}i(e,t);var o=e.prototype;return o.start=function(){p.on(c.EventType.MOUSE_UP,this.onMouseUp,this)},o.update=function(t){this._startJump&&(this._curJumpTime+=t,this._curJumpTime>this._jumpTime?(this.node.setPosition(this._targetPos),this._startJump=!1,this.onOnceJumpEnd()):(this.node.getPosition(this._curPos),this._deltaPos.x=this._curJumpSpeed*t,h.add(this._curPos,this._curPos,this._deltaPos),this.node.setPosition(this._curPos)))},o.onMouseUp=function(t){},o.jumpByStep=function(t){this._startJump||(this._startJump=!0,this._jumpStep=t,this._curJumpTime=0,this._curJumpSpeed=this._jumpStep/this._jumpTime,this.node.getPosition(this._curPos),h.add(this._targetPos,this._curPos,new h(this._jumpStep,0,0)),this.BodyAnim&&(1===t?this.BodyAnim.play("oneStep"):2===t&&this.BodyAnim.play("twoStep")),this._curMoveIndex+=t)},o.setInputActive=function(t){t?p.on(c.EventType.MOUSE_UP,this.onMouseUp,this):p.off(c.EventType.MOUSE_UP,this.onMouseUp,this)},o.onOnceJumpEnd=function(){this.node.emit("JumpEnd",this._curMoveIndex)},o.reset=function(){this._curMoveIndex=0},e}(a)).prototype,"BodyAnim",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=l))||d));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});